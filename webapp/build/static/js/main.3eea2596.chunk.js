(this["webpackJsonpweb-server"]=this["webpackJsonpweb-server"]||[]).push([[0],{37:function(e,t,a){},49:function(e,t,a){e.exports=a(65)},59:function(e,t,a){},61:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),l=a.n(c),i=a(24),o=a(6),s=(a(59),a(60),a(61),a(70)),u=a(39),m=a(67);var d=function(){var e=Object(o.c)((function(e){return e.apiDomain})),t=Object(o.c)((function(e){return e.text})),a=Object(o.b)();return r.a.createElement("div",null,r.a.createElement(u.a,{as:"textarea",rows:"20",onChange:function(e){a({type:"TEXT",payload:e.target.value})},value:t,className:"mb-2"}),r.a.createElement("div",{className:"mb-2 clearfix"},r.a.createElement(m.a,{variant:"primary",className:"float-right ml-3",onClick:function(){if(""!==t){var n=new FormData;n.append("context",t),a({type:"LOADING",payload:!0}),fetch(e+"/mark",{body:n,method:"POST"}).then((function(e){return e.text()})).then((function(e){a({type:"MARKED",payload:e}),a({type:"PAGE",payload:"select"})})).catch((function(e){a({type:"ERROR",payload:e.message})})).finally((function(){a({type:"LOADING",payload:!1})}))}}},"Proceed"),r.a.createElement(m.a,{variant:"info",className:"float-right",onClick:function(){a({type:"TEXT",payload:"The OUHK is a pioneer of open and distance education. Established by the Government in 1989 as The Open Learning Institute of Hong Kong (OLI), we have striven to achieve our mission of \u201cEducation for All\u201d, making quality and flexible further education opportunities available to working adults. After years of steady development, the OUHK attained university title in May 1997, which is a testament to the wide recognition of our academic accomplishments and contributions to higher education."})}},"Sample Text")))},p=a(11),f=a(68);a(63);var E=function(e){var t=Object(o.c)((function(e){return e.marked})),a=Object(o.b)(),n=e.ans,c=e.index,l=e.first;return r.a.createElement(f.a,{className:"unselectable my-1"},r.a.createElement(m.a,{variant:"primary",href:"#",disabled:!0,size:"sm"},n),r.a.createElement(m.a,{variant:"danger",size:"sm",onClick:function(){var e=t.split(/(?=<ans>)/g);l?e[0]=e[0].replace("<ans>","").replace("</ans>",""):t.startsWith("<ans>")?e[c-1]=e[c-1].replace("<ans>","").replace("</ans>",""):e[c]=e[c].replace("<ans>","").replace("</ans>",""),a({type:"MARKED",payload:e.join("")})}},"\xd7"))};var b=function(){var e=Object(n.useState)(),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),i=Object(p.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)({display:"none"}),f=Object(p.a)(d,2),b=f[0],v=f[1],h=Object(o.c)((function(e){return e.apiDomain})),y=Object(o.c)((function(e){return e.text})),g=Object(o.c)((function(e){return e.marked})),O=Object(o.b)();return Object(n.useEffect)((function(){u(function(e){for(var t=e.split("<ans>"),a=[e.split("<ans>")[0]],n=1;n<t.length;n++){var c=0===t[0].length&&1===n,l=t[n].split("</ans>")[0],i=t[n].split("</ans>")[1],o=r.a.createElement(E,{ans:l,index:n,first:c,key:n});a.push(o),a.push(i)}return a}(g))}),[g]),r.a.createElement("div",{style:{whiteSpace:"pre-line"}},r.a.createElement("div",{className:"border rounded p-2 mb-2"},r.a.createElement(m.a,{variant:"success",size:"sm",style:b,onClick:function(){v({display:"none"});var e=window.getSelection().anchorNode.textContent,t=g.indexOf(e)+window.getSelection().anchorOffset;if(void 0!==t&&""!==a){var n=g.substring(0,t),r=g.substring(t);r=r.replace(a,"<ans>"+a+"</ans>"),console.log(t),O({type:"MARKED",payload:n+r})}}},"+"),r.a.createElement("div",{onMouseUp:function(e){var t=window.getSelection().toString().trim();if(c(t),t){var a=e.clientX,n=e.clientY-40;v({display:"block",position:"absolute",top:n,left:a,zIndex:"10"})}else v({display:"none"})},style:{minHeight:"30rem"}},s)),r.a.createElement("div",null,"*Highlight text to add keywords"),r.a.createElement("div",null,"*If no keywords, only grammar questions will be generated"),r.a.createElement("div",{className:"mb-2 clearfix"},r.a.createElement(m.a,{variant:"primary",className:"float-right ml-3",onClick:function(){var e=[],t=[],a=new FormData;a.append("context",g),O({type:"LOADING",payload:!0}),fetch(h+"/wh",{body:a,method:"POST"}).then((function(e){return e.text()})).then((function(a){e=JSON.parse(a),O({type:"WQ",payload:e});var n=new FormData;n.append("context",y),fetch(h+"/grammar",{body:n,method:"POST"}).then((function(e){return e.text()})).then((function(e){t=JSON.parse(e),O({type:"GQ",payload:t}),O({type:"SUBMITTED",payload:!0}),O({type:"PAGE",payload:"results"})}))})).catch((function(e){O({type:"ERROR",payload:e.message})})).finally((function(){O({type:"LOADING",payload:!1})}))}},"Proceed"),r.a.createElement(m.a,{variant:"warning",className:"float-right ml-3",onClick:function(){O({type:"MARKED",payload:y})}},"Remove all")))},v=a(73),h=a(72),y=a(71),g=a(41),O=a.n(g),w=a(42),j=a.n(w);var k=function(e){var t=Object(n.useRef)(),a=Object(o.c)((function(e){return e.wq})),c=Object(o.b)(),l=e.data,i=e.index,s=Object(n.useState)(!1),u=Object(p.a)(s,2),d=u[0],f=u[1];return r.a.createElement("div",{className:"p-2 mb-2"},r.a.createElement("div",null,i+1,")"," ",r.a.createElement(j.a,{innerRef:t,html:l.question,disabled:!1,onChange:function(e){var t=a.slice(0);t[i].question=e.target.value,c({type:"WQ",payload:t})},tagName:"span"}),r.a.createElement(m.a,{onClick:function(){return f(!0)},variant:"outline-info",size:"sm",className:"ml-2"},"Source"),r.a.createElement(m.a,{onClick:function(){var e=a.slice(0);e.splice(i,1),c({type:"WQ",payload:e})},variant:"outline-danger",size:"sm",className:"ml-2"},"Delete")),r.a.createElement("div",{hidden:e.hideAns},r.a.createElement("strong",null,"Answer:")," ",l.answer),r.a.createElement(y.a,{show:d,onHide:function(){return f(!1)},size:"lg",centered:!0},r.a.createElement(y.a.Header,{closeButton:!0},i+1,") ",l.question),r.a.createElement(y.a.Body,null,r.a.createElement(O.a,{highlightClassName:"highlight",searchWords:[l.answer],textToHighlight:l.context}))),r.a.createElement("br",null))};var N=function(e){var t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],l=a[1],i=Object(o.c)((function(e){return e.gq})),s=Object(o.b)(),u=e.data,d=e.index;return Object(n.useEffect)((function(){var e=u.distractors.slice(0).splice(0,3);e.push(u.answer),e.sort((function(e,t){return.5-Math.random()})),l(e)}),[u]),r.a.createElement("div",{className:"p-2 mb-2"},r.a.createElement("div",null,d+1,") ",u.question,r.a.createElement(m.a,{onClick:function(){l(c.slice(0).sort((function(e,t){return.5-Math.random()})))},variant:"outline-primary",size:"sm",className:"ml-2"},"Shuffle"),r.a.createElement(m.a,{onClick:function(){var e=i.slice(0);e.splice(d,1),s({type:"GQ",payload:e})},variant:"outline-danger",size:"sm",className:"ml-2"},"Delete")),r.a.createElement("div",null,r.a.createElement("div",{hidden:e.hideAns},r.a.createElement("strong",null,"Answer:")," ",u.answer),c.map((function(e,t){return r.a.createElement("div",{key:t},function(e){return 0===e?"A":1===e?"B":2===e?"C":3===e?"D":void 0}(t),") ",e)}))),r.a.createElement("br",null))};var x=function(){var e=Object(n.useState)(),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),i=Object(p.a)(l,2),s=i[0],u=i[1],d=Object(o.c)((function(e){return e.wq})),f=Object(o.c)((function(e){return e.gq}));return Object(n.useEffect)((function(){0===d.length?c("gq"):c("wq")}),[d]),r.a.createElement("div",null,r.a.createElement(v.a,{horizontal:!0,className:"mb-2 text-center"},r.a.createElement(v.a.Item,{action:!0,active:"wq"===a,onClick:function(){return c("wq")}},"Wh Questions"),r.a.createElement(v.a.Item,{action:!0,active:"gq"===a,onClick:function(){return c("gq")}},"Grammar Questions")),r.a.createElement("div",{className:"border rounded p-2 mb-2"},r.a.createElement("div",{className:"d-flex justify-content-between p-2 border-bottom"},r.a.createElement("div",null,r.a.createElement(h.a.Group,{controlId:"showAnswerCheckbox",className:"m-0 d-inline-block"},r.a.createElement(h.a.Check,{type:"checkbox",label:"Show Answer",checked:!s,onChange:function(e){e.target.checked?u(!1):u(!0)}})),r.a.createElement(m.a,{variant:"outline-primary",size:"sm",className:"ml-2",onClick:function(){var e=document.createRange();e.selectNode(document.getElementById("results")),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),document.execCommand("copy")}},"Copy to Clipboard")),r.a.createElement("div",{hidden:"wq"!==a},"*Click on a question to edit it")),r.a.createElement("div",{id:"results"},r.a.createElement("div",{hidden:"wq"!==a},d.map((function(e,t){return r.a.createElement(k,{data:e,hideAns:s,index:t,key:t})}))),r.a.createElement("div",{hidden:"gq"!==a},f.map((function(e,t){return r.a.createElement(N,{data:e,hideAns:s,index:t,key:t})}))))))};var S=function(){switch(Object(o.c)((function(e){return e.page}))){case"home":return r.a.createElement(d,null);case"select":return r.a.createElement(b,null);case"results":return r.a.createElement(x,null);default:return r.a.createElement("h1",null,"404")}},A=a(69);a(37);var C=function(){return Object(o.c)((function(e){return e.loading}))?r.a.createElement("div",{className:"loading"},r.a.createElement(A.a,{animation:"border"}),r.a.createElement("div",null,"Loading...")):null};var D=function(){var e=Object(o.c)((function(e){return e.page})),t=Object(o.c)((function(e){return e.marked})),a=Object(o.c)((function(e){return e.submitted})),n=Object(o.b)();return r.a.createElement(v.a,{horizontal:!0,className:"mb-2"},r.a.createElement(v.a.Item,{action:!0,active:"home"===e,onClick:function(){return n({type:"PAGE",payload:"home"})}},"1: Input Text"),r.a.createElement(v.a.Item,{action:!0,active:"select"===e,disabled:""===t,onClick:function(){return n({type:"PAGE",payload:"select"})}},"2: Select Keywords"),r.a.createElement(v.a.Item,{action:!0,active:"results"===e,disabled:!a,onClick:function(){return n({type:"PAGE",payload:"results"})}},"3: Results"))};var q=function(){var e=Object(o.c)((function(e){return e.error}));return r.a.createElement("div",{className:"container"},r.a.createElement("header",null,r.a.createElement("h1",null,"Automated Question Generator")),r.a.createElement(D,null),r.a.createElement(s.a,{variant:"warning",hidden:""===e},e),r.a.createElement(C,null),r.a.createElement(S,null))},R=a(16),I={apiDomain:"",error:"",page:"home",loading:!1,text:"",marked:"",submitted:!1,gq:[],wq:[]};var T=Object(i.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR":return Object(R.a)({},e,{error:t.payload});case"PAGE":return Object(R.a)({},e,{page:t.payload});case"LOADING":return Object(R.a)({},e,{loading:t.payload});case"TEXT":return Object(R.a)({},e,{text:t.payload});case"MARKED":return Object(R.a)({},e,{marked:t.payload});case"SUBMITTED":return Object(R.a)({},e,{submitted:t.payload});case"GQ":return Object(R.a)({},e,{gq:t.payload});case"WQ":return Object(R.a)({},e,{wq:t.payload});default:return e}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:T},r.a.createElement(q,null))),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.3eea2596.chunk.js.map